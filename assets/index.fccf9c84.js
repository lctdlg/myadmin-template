import{p as e,d as l,o as t,e as n,f as a,g as o,i,C as s,k as p,m as r,s as u}from"./vendor.f7dd4e9f.js";const d={name:"SilkRibbon",props:{pattern:{type:Number,default:1},content:{type:String,default:"文字"}},computed:{ribbonClass(){return this.pattern<6&&this.pattern>1?"silk-ribbon"+this.pattern:"silk-ribbon1"}}},c=i();e("data-v-731b80f7");const f={style:{cursor:"pointer"}};l();const g=c(((e,l,i,s,p,r)=>(t(),n("span",{style:{"z-index":"1",color:"white"},class:r.ribbonClass},[a("span",f,o(i.content),1)],2))));d.render=g,d.__scopeId="data-v-731b80f7";const m={name:"FileUpload",components:{SilkRibbon:d},setup(){const e="http://localhost:8080/api/file/upload";return{uploadAttr:{action:e,headers:{token:"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI4IiwiaWF0IjoxNjIxMTQ4NzQ1LCJleHAiOjE2MjE3NTM1NDV9.luk430AQx3BhiYhgyCx0qR5CvbUv3dN9H0rG1y2fgiMbnckFe5n1HknsNg4P6neSDK5gQEEXZxRGCbY4PVot9w"},drag:!0,multiple:!0,onSuccess:e=>{console.log(e)},onError:(e,l,t)=>{alert(e)},beforeUpload:e=>{console.log(e),console.log("type:"+e.type,Math.round(e.size/1024*100/100)+"KB")}},upload1:s(null),fileInput:s(null),action:e,setImage:e=>{const l=e.target.files;console.log(l),alert(`你选择了${l.length}个文件，第一个文件名为${l[0].name}`)}}}},b=i();e("data-v-437ea51a");const h={class:"upload-demo"},v={class:"el-upload-demo"},I=a("h1",null,[a("a",{href:"https://element-plus.gitee.io/#/zh-CN/component/upload",target:"_blank"}," EL-Upload上传 ")],-1),k=a("p",null,[u(" element-plus自带组件，通过点击或者拖拽上传文件，更多细节 "),a("b",null,"见源码")],-1),y=a("p",null,"文档参数很多，最常用的回调函数:onSuccess、onError、beforeUpload",-1),x=a("p",null,"请求细节:Request Method:Post、Content-Type: multipart/form-data;",-1),C=a("p",null,"SpringBoot控制层参数接受文件的方式:(MultipartFile file)作为参数",-1),R=a("p",null,"同时配置文件中spring.servlet.multipart.enabled属性需为true",-1),_=a("i",{class:"el-icon-upload"},null,-1),F=a("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或 "),a("em",null,"点击上传")],-1),M=a("div",{class:"el-upload__tip"}," tip:只能上传 jpg/png 文件，且不超过 500kb ",-1),N=u(" 当前action： "),S={class:"custom-upload-demo"},U=a("h1",null,"自定义上传功能",-1),E=a("input",{type:"file",name:"file"},null,-1),j=u(" 👈不想要丑丑的原生上传组件，怎么办？ "),z=a("p",null," 首先给原生的上传组件隐藏起来，添加ref引用，添加接受类型(支持表达式)，添加@change方法 ",-1),A=a("p",null,' 比如:<input hidden type="file" ref="fileInput" @change="setImage" accept="image/*" /> ',-1),w=u(" 当需要 "),J=u(" 选择文件的对话框，调用fileInput.click方法即可,选择文件完后会调用@change的方法 "),P=a("p",null," @change方法的第一个参数event的target属性就是那个input，调用event.target.files即可获取选择的文件 ",-1),Q=a("h2",null,"附:FileReader的使用",-1),B=a("pre",null,"  if (typeof FileReader === 'function'){\n    const reader = new FileReader()\n    reader.onload = (event) => {\n      imgSrc.value = event.target.result\n    }\n    reader.readAsDataURL(file)\n  } else {\n    alert('不支持FileReader API')\n  }\n    ",-1);l();const D=b(((e,l,i,s,u,d)=>{const c=p("el-upload"),f=p("silk-ribbon");return t(),n("div",h,[a("div",v,[I,k,y,x,C,R,a(c,r({ref:"upload1",style:{"max-width":"360px"}},s.uploadAttr),{tip:b((()=>[M])),default:b((()=>[_,F])),_:1},16),a("p",null,[N,a("span",null,o(s.action),1)]),a(f)]),a("div",S,[U,a("div",null,[E,j,a("input",{hidden:"",multiple:"",type:"file",ref:"fileInput",name:"image",onChange:l[1]||(l[1]=(...e)=>s.setImage&&s.setImage(...e)),accept:"image/*"},null,544)]),z,A,a("p",null,[w,a("button",{onClick:l[2]||(l[2]=(...e)=>s.fileInput.click&&s.fileInput.click(...e))},"弹出"),J]),P,Q,B])])}));m.render=D,m.__scopeId="data-v-437ea51a";export default m;
